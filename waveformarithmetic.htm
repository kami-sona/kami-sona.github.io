<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, user-scalable=yes"/>
  <meta name="version" content="2022.4.0"/>
  <link rel="StyleSheet" href="./template/styles/topic.min.css" type="text/css"/>
  <link rel="StyleSheet" data-skin="true" type="text/css" href="./template/LTspice/layout.css"/>
  <link rel="StyleSheet" data-skin="true" href="./template/LTspice/userstyles.css" type="text/css"/>
  
  <script data-relpath="." src="./template/scripts/csh-redirect.js" type="text/javascript"></script>

  <title>Waveform Arithmetic</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  
  <meta name="description" content=""/>
  <meta name="generator" content="Adobe RoboHelp 2022"/>
  <meta name="rh-index-keywords" content="Waveform Arithmetic"/>
  <link rel="stylesheet" type="text/css" href="assets/css/default.css"/>
<meta name="rh-version" content="2022.5.24"/></head>

<body class="rh-BODY-wrapper">
  <div class="cookie-widget-holder" id="cookie-status-widget-holder"></div>
  <div class="RH-LAYOUT-HEADER-skip-content-container" id="skip-to-content"></div>
  <header class="RH-LAYOUT-HEADER-container" role="banner">
    <div class="RH-LAYOUT-HEADER-logo-box  ">
      <div class="RH-LAYOUT-HEADER-logo" id="logo-holder"></div>
      <div class="RH-LAYOUT-HEADER-title" id="topic-title-holder"></div>
    </div>
    <div class="RH-LAYOUT-HEADERMENU-container" id="header-menu"></div>
    <div class="search-placeholder-class" id="search-with-help"></div>
  </header>
  <main role="main" class="RH-LAYOUT-BODY-container">
    <div class="RH-LAYOUT-SEARCHRESULTS" id="rh-searchresults"></div>
    <div class="RH-LAYOUT-LEFTPANEL-container" id="rh-leftpanel"></div>
    <div class="rh-layout-BODY-main" id="rh-layout-main">
      <div class="RH-LAYOUT-TOOLBAR-toolbar-box" id="rh-toolbar"></div>
      <div class="rh-layout-BODY-body">
        <div class="RH-LAYOUT-CENTERPANEL-container">
          <div class="rh-layout-selectdetails" id="rh-selectdetails"></div>
          <div class="RH-LAYOUT-CENTERPANEL-topic-box" id="rh-topic">
  <div id="topic_content">
    <h1>Waveform Arithmetic</h1>
    <p>There are three types of mathematical operations that can be performed on waveform data:</p>
    <p>1. Plot expressions of traces.</p>
    <p>2. Compute the average or RMS of a trace.</p>
    <p>3. Display the Fourier Transform of a trace.</p>
    <p>1. Plot expressions of traces.</p>
    <p>Both the View &gt; Visible Traces and View &gt; Add Trace commands allow one to enter an expression of data. Another method to plot an expression of available simulation data traces is to move the mouse to the trace&#39;s label and right click. This dialog box also allows you to set the trace&#39;s color and allows you to attach a cursor to the waveform. LTspice will do a dimensional analysis of the expression and plot it against a vertical axis labeled with those units. For example, below you can see that LTspice identified the dimensions of -2*π*pow(V(out),2)/abs(V(n001))/Ie(x1:Q1) as Ω. All waveforms in a plotting pane with the same units are plotted on the same axis.</p>
    <p><img alt="" src="assets/images/lib/EntrExpr.png" style="vertical-align: text-bottom;"/></p>
    <p>The difference of two voltages; e.g., V(a)-V(b); can written equivalently as V(a,b). The following functions are available for real data:</p>
    <div>
      <table>
        <tbody>
          <tr>
            <th>Function Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td>abs(x)</td>
            <td>Absolute value of x</td>
          </tr>
          <tr>
            <td>acos(x)</td>
            <td>Arc cosine of x</td>
          </tr>
          <tr>
            <td>arccos(x)</td>
            <td>Synonym for acos()</td>
          </tr>
          <tr>
            <td>acosh(x)</td>
            <td>Arc hyperbolic cosine</td>
          </tr>
          <tr>
            <td>asin(x)</td>
            <td>Arc sine of x</td>
          </tr>
          <tr>
            <td>arcsin(x)</td>
            <td>Synonym for sin()</td>
          </tr>
          <tr>
            <td>asinh(x)</td>
            <td>Arc hyperbolic sine</td>
          </tr>
          <tr>
            <td>atan(x)</td>
            <td>Arc tangent of x</td>
          </tr>
          <tr>
            <td>arctan(x)</td>
            <td>Synonym for atan()</td>
          </tr>
          <tr>
            <td>atan2(y,x)</td>
            <td>Four quadrant arc tangent of y/x</td>
          </tr>
          <tr>
            <td>atanh(x)</td>
            <td>Arc hyperbolic tangent</td>
          </tr>
          <tr>
            <td>buf(x)</td>
            <td>1 if x &gt; .5, else 0</td>
          </tr>
          <tr>
            <td>ceil(x)</td>
            <td>Integer equal or greater than x</td>
          </tr>
          <tr>
            <td>cos(x)</td>
            <td>Cosine of x</td>
          </tr>
          <tr>
            <td>cosh(x)</td>
            <td>Hyperbolic cosine of x</td>
          </tr>
          <tr>
            <td>d()</td>
            <td>Finite difference-based derivative</td>
          </tr>
          <tr>
            <td>exp(x)</td>
            <td>e to the x</td>
          </tr>
          <tr>
            <td>floor(x)</td>
            <td>Integer equal to or less than x</td>
          </tr>
          <tr>
            <td>hypot(x,y)</td>
            <td>sqrt(x**2 + y**2)</td>
          </tr>
          <tr>
            <td>if(x,y,z)</td>
            <td>If x &gt; .5, then y else z</td>
          </tr>
          <tr>
            <td>int(x)</td>
            <td>Convert x to integer</td>
          </tr>
          <tr>
            <td>inv(x)</td>
            <td>0. if x &gt; .5, else 1.</td>
          </tr>
          <tr>
            <td>limit(x,y,z)</td>
            <td>Intermediate value of x, y, and z</td>
          </tr>
          <tr>
            <td>ln(x)</td>
            <td>Natural logarithm of x</td>
          </tr>
          <tr>
            <td>log(x)</td>
            <td>Alternate syntax for ln()</td>
          </tr>
          <tr>
            <td>log10(x)</td>
            <td>Base 10 logarithm</td>
          </tr>
          <tr>
            <td>max(x,y)</td>
            <td>The greater of x or y</td>
          </tr>
          <tr>
            <td>min(x,y)</td>
            <td>The smaller of x or y</td>
          </tr>
          <tr>
            <td>pow(x,y)</td>
            <td>x**y</td>
          </tr>
          <tr>
            <td>pwr(x,y)</td>
            <td>abs(x)**y</td>
          </tr>
          <tr>
            <td>pwrs(x,y)</td>
            <td>sgn(x)*abs(x)**y</td>
          </tr>
          <tr>
            <td>rand(x)</td>
            <td>Random number between 0 and 1 depending on the integer value of x.</td>
          </tr>
          <tr>
            <td>random(x)</td>
            <td>Similar to rand(), but smoothly transitions between values.</td>
          </tr>
          <tr>
            <td>round(x)</td>
            <td>Nearest integer to x</td>
          </tr>
          <tr>
            <td>sgn(x)</td>
            <td>Sign of x</td>
          </tr>
          <tr>
            <td>sin(x)</td>
            <td>Sine of x</td>
          </tr>
          <tr>
            <td>sinh(x)</td>
            <td>Hyperbolic sine of x</td>
          </tr>
          <tr>
            <td>sqrt(x)</td>
            <td>Square root of x</td>
          </tr>
          <tr>
            <td>table(x,a,b,c,d,...)</td>
            <td>Interpolate a value for x based on a look up table given as a set of pairs of points.</td>
          </tr>
          <tr>
            <td>tan(x)</td>
            <td>Tangent of x.</td>
          </tr>
          <tr>
            <td>tanh(x)</td>
            <td>Hyperbolic tangent of x</td>
          </tr>
          <tr>
            <td>u(x)</td>
            <td>Unit step, i.e., 1 if x &gt; 0., else 0.</td>
          </tr>
          <tr>
            <td>uramp(x)</td>
            <td>x if x &gt; 0., else 0.</td>
          </tr>
          <tr>
            <td>white(x)</td>
            <td>Random number between -.5 and .5 smoothly transitions between values even more smoothly than random().</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p>For complex data, the functions atan2(,), sgn(), u(), buf(), inv() uramp(), int(), floor(), ceil(), rand(), min(,), limit(,), if(,,), and table(...) are not available. The functions Re(x) and Im(x) are available for complex data and return a complex number with the real part equal to the real or imaginary part of the argument respectively and the imaginary part equal to zero. The functions Ph(x) and Mag(x) are also available for complex data and return a complex number with the real part equal to the phase angle or magnitude of the argument respectively and the imaginary part equal to zero. The function conj(x) is also available for complex data and returns the complex conjugate of x.</p>
    <p>The following operations, grouped in reverse order of precedence of evaluation, are available for real data:</p>
    <div>
      <table>
        <tbody>
          <tr>
            <td>Operand</td>
            <td>Description</td>
          </tr>
          <tr>
            <td>&amp;</td>
            <td>Convert the expressions to either side to Boolean, then AND.</td>
          </tr>
          <tr>
            <td>|</td>
            <td>Convert the expressions to either side to Boolean, then OR.</td>
          </tr>
          <tr>
            <td>^</td>
            <td>Convert the expressions to either side to Boolean, then XOR.</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>&gt;</td>
            <td>TRUE if expression on the left is greater than the expression on the right, otherwise FALSE.</td>
          </tr>
          <tr>
            <td>&lt;</td>
            <td>TRUE if expression on the left is less than the expression on the right, otherwise FALSE.</td>
          </tr>
          <tr>
            <td>&gt;=</td>
            <td>TRUE if expression on the left is greater than or equal the expression on the right, otherwise FALSE.</td>
          </tr>
          <tr>
            <td>&lt;=</td>
            <td>TRUE if expression on the left is less than or equal the expression on the right, otherwise FALSE.</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>+</td>
            <td>Addition</td>
          </tr>
          <tr>
            <td>-</td>
            <td>Subtraction</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>*</td>
            <td>Multiplication</td>
          </tr>
          <tr>
            <td>/</td>
            <td>Division</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>**</td>
            <td>Raise left hand side to power of right hand side.</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>!</td>
            <td>Convert the following expression to Boolean and invert.</td>
          </tr>
          <tr>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td>@</td>
            <td>Step selection operator</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p>TRUE is numerically equal to 1 and FALSE is 0. Conversion to Boolean converts a value to 1 if the value is greater than 0.5, otherwise the value is converted to 0.</p>
    <p>The step selection operator, &#39;@&#39; is useful when multiple simulation runs are available as in a .step, .temp, or .dc analysis. It selects the data from a specific run. For example, V(1)@3 would plot the data from the 3rd run no matter what steps where selected for plotting.</p>
    <p>For complex data, only +, -, *, /, **, and @ are available. Also with regard to complex data, the Boolean XOR operator, ^ is understood to mean exponentiation, **.</p>
    <p>The following constants are internally defined:</p>
    <div>
      <table>
        <tbody>
          <tr>
            <td>Name</td>
            <td>Value</td>
          </tr>
          <tr>
            <td>E</td>
            <td>2.7182818284590452354</td>
          </tr>
          <tr>
            <td>pi</td>
            <td>3.14159265358979323846</td>
          </tr>
          <tr>
            <td>K</td>
            <td>1.3806503e-23</td>
          </tr>
          <tr>
            <td>Q</td>
            <td>1.602176462e-19</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p>The keyword &quot;time&quot; is understood when plotting transient analysis waveform data. Similarly, &quot;omega&quot; is understood when plotting data from an AC analysis. &quot;w&quot; can be used as a synonym for omega.</p>
    <p>2. Compute the average or RMS of a trace.</p>
    <p>The waveform viewer can integrate a trace to obtain the average and RMS value over the displayed region. First zoom the waveform to the region of interest, then move the mouse to the label of the trace, hold down the control key and left mouse click.</p>
    <p><img alt="" src="assets/images/lib/RMS.png" style="vertical-align: text-bottom;"/></p>
    <p>Note RMS average is reported only if the physical units of the integrated quantity is volts or amps to avoid confusing people that need the average when power is integrated.</p>
    <p>3. Display the Fourier Transform of a Trace.</p>
    <p>You can use the menu command View &gt; FFT to perform a Fast Fourier transform on various data traces.</p>
    <p><img alt="" src="assets/images/lib/FFT.png" style="vertical-align: text-bottom;"/></p>
    <p>LTspice uses a proprietary FFT algorithm that allows an arbitrary number of datapoints, i.e., not limited to a power of 2.</p>
    <p>When you expect to do FFT&#39;s of your simulation data, you will probably want to turn off waveform compression, stipulate a maximum time step, and possibly even use double precision waveform file format to reduce the numeric noise floor. The following netlist shows that the intrinsic noise floor of LTspice&#39;s FFT algorithm is in excess of 300dB.</p>
    <p><img alt="" src="assets/images/lib/300dB.png" style="vertical-align: text-bottom;"/></p>
  </div>
  <div data-conref="assets/snippets/copyright_at_bottom_of_page.hts">
  <p class="copyright">Copyright © 1998–2025 by Analog Devices Inc. All Rights Reserved.</p>

</div>

</div>
          <div class="RH-LAYOUT-BRS-container" id="rh-brs"></div>
        </div>
        <div class="RH-LAYOUT-RIGHTPANEL-container" id="rh-rightpanel"></div>
      </div>
    </div>
  </main>
  <footer role="contentinfo" class="RH-LAYOUT-FOOTER-container" id="rh-footer"></footer>
  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "."
    gCommonRootRelPath = "."
    gTopicId = "4.3"
  
//]]></script>


  <script src="./template/scripts/topicpage.js"></script>
  <script src="./whxdata/layoutconfig.js"></script>
  <script src="./whxdata/brsdata.js"></script>

  
    

            


</body></html>